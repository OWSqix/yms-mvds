<div id="wrapper">
  <!-- Page Title -->
  <h2>{{ 'policy_definition_page.title' | translate }}</h2>
  
  <!-- Search and Create Card -->
  <mat-card class="search-create-card">
    <!-- Search and Create Section -->
    <div class="search-create-container">
      <!-- Search Bar (80%) -->
      <mat-form-field
        class="search-form-field"
        color="accent">
        <mat-label>{{
          'policy_definition_page.search_pol' | translate
        }}</mat-label>
        <input matInput [(ngModel)]="searchText" (input)="onSearch()" />
        <mat-icon matPrefix>search</mat-icon>
        <button
          *ngIf="searchText"
          mat-icon-button
          matSuffix
          (click)="searchText = ''; onSearch()">
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>

      <!-- Create Button (20%) -->
      <button
        id="create-button"
        color="primary"
        mat-raised-button
        class="create-policy-button"
        routerLink="/policies/create">
        <mat-icon>add_circle_outline</mat-icon>
        <span class="button-text">{{ 'policy_definition_page.create_policy' | translate }}</span>
        <span class="button-text-mobile">{{ 'general.create' | translate }}</span>
      </button>
    </div>
  </mat-card>

  <!-- Results Section -->
  <div class="results-section">
    <!-- Paginator -->
    <div class="pagination-container" *ngIf="policyList.isReady && policyList.data.numTotalPolicies">
      <mat-paginator
        [hidePageSize]="true"
        [disabled]="true"
        [pageSize]="policyList.data.policyCards.length"
        [length]="policyList.data.numTotalPolicies"
        class="paginator-styled">
      </mat-paginator>
    </div>

    <div class="content-container">
      <loading-state
        *ngIf="policyList.isLoading"
        class="state-container"></loading-state>
      <error-state
        *ngIf="policyList.isError"
        class="state-container"
        [error]="policyList.errorOrUndefined"></error-state>
      <empty-state
        *ngIf="
          policyList.isReady &&
          (!policyList.data.numTotalPolicies ||
            !policyList.data.policyCards.length)
        "
        class="state-container"
        [emptyMessage]="
          'policy_definition_page.no_pol' | translate
        "></empty-state>
      
      <div
        *ngIf="policyList.isReady && !!policyList.data.numTotalPolicies"
        class="policies-grid">
        <policy-cards
          [policyCards]="policyList.data.policyCards"
          [deleteBusy]="deleteBusy"
          (deleteDone)="refresh()"
          class="policy-cards-container"></policy-cards>
      </div>
    </div>
  </div>
</div>
